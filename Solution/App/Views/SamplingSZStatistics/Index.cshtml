@{
    ViewBag.Title = "采样水质统计";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div id="app">
    <singlechannelsztj-query v-on:emit-event="getEmitEvent" ref="SingleChannelsztjQuery"></singlechannelsztj-query>
    <com-line v-bind:option="lineOption" ref="line" style="width:100%;height:350px;  "></com-line>
    <div id="tableData">
        <template>
            <el-table v-bind:data="tableData"
                      stripe
                      border
                      style="width: 100%"
                      v-bind:height="tableHeight">
                <el-table-column prop="id"
                                 label="序号"
                                 width="180">
                </el-table-column>
                <el-table-column prop="yi"
                                 label="1月">
                </el-table-column>
                <el-table-column prop="er"
                                 label="2月">
                </el-table-column>
                <el-table-column prop="san"
                                 label="3月">
                </el-table-column>
                <el-table-column prop="si"
                                 label="4月">
                </el-table-column>
                <el-table-column prop="wu"
                                 label="5月">
                </el-table-column>
                <el-table-column prop="liu"
                                 label="6月">
                </el-table-column>
                <el-table-column prop="qi"
                                 label="7月">
                </el-table-column>
                <el-table-column prop="ba"
                                 label="8月">
                </el-table-column>
                <el-table-column prop="jiu"
                                 label="9月">
                </el-table-column>
                <el-table-column prop="shi"
                                 label="10月">
                </el-table-column>
                <el-table-column prop="shiyi"
                                 label="11月">
                </el-table-column>
            </el-table>
        </template>
    </div>
</div>

@Html.Partial("~/Views/SamplingSZStatistics/components/query.cshtml")
@Html.Partial("~/Views/components/echarts/com_line.cshtml")


<script>
    new Vue({
        el: "#app",
        data: {
            styles: {
                width: '90%',
                height: '0px',
                float: 'left',
            },
            height: '0px',
          // tableData: [],
            tableData: [{
                id: '1',
                yi: '1月',
                er: '2月',
                san:'3月',
                si: '4月',
                wu: '5月',
                liu: '6月',
                qi: '7月',
                ba: '8月',
                jiu: '9月',
                shi: '10月',
                shiyi: '11月',
            }, {
                id: '1',
                yi: '1月',
                er: '2月',
                san: '3月',
                si: '4月',
                wu: '5月',
                liu: '6月',
                qi: '7月',
                ba: '8月',
                jiu: '9月',
                shi: '10月',
                shiyi: '11月',
            }, {
                id: '1',
                yi: '1月',
                er: '2月',
                san: '3月',
                si: '4月',
                wu: '5月',
                liu: '6月',
                qi: '7月',
                ba: '8月',
                jiu: '9月',
                shi: '10月',
                shiyi: '11月',
            }, ],
         
            params: [],
            lineOption: null,
        },
        components: {
            "singlechannelsztj-query": query,
            "com-line": comLine
        },
        mounted: function () {
            this.setSize();
            this.resize();
        },
        methods: {
            init: function () {
                this.setLineData();
            },
            indexMethod: function (index) {
                return (index + 1) + (this.currentPage - 1) ;
            },
            
            getEmitEvent: function (param) {
                this.setTableData('/SingleChannelSztj/GetProjectData', {
                    Page: this.currentPage,  startYear: param.startYear, endYear: param.endYear, Status: param.Status, Town: param.Town, NameNum: param.NameNum,
                });
            },
            setLineData: function () {
                this.lineOption = {
                    title: {
                        text: '大叶公路巨潮港桥-水质逐月统计'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: ['铁（mg/L）', '锰（mg/L）', '氨氮（mg/L）']
                    },
                    toolbox: {
                        show: true,
                        feature: {
                            dataZoom: {
                                yAxisIndex: 'none'
                            },
                            dataView: { readOnly: false },
                            magicType: { type: ['line', 'bar'] },
                            restore: {},
                            saveAsImage: {}
                        }
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: ['1月1日', '2月1日', '3月1日', '4月1日', '5月1日', '6月1日', '7月1日', '8月1日', '9月1日', '10月1日', '12月1日', '12月1日']
                    },
                    yAxis: {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} °C'
                        }
                    },
                    series: [
                        {
                            name: '铁（mg/L)',
                            type: 'line',
                            data: [8, 10, 13, 16, 10, 16, 6],
                        },
                        {
                            name: '锰（mg/L）',
                            type: 'line',
                            data: [1, 6, 2, 5, 3, 2, 0],
                        },
                        {
                            name: '氨氮（mg/L）',
                            type: 'line',
                            data: [11, 11, 15, 13, 12, 13, 10],
                        },
                    ]
                };
            },
            //setData: function (url, param) {
            //    this.setLineData(url, param);
            //},
            setSize: function () {
                var docH = document.documentElement.clientHeight
                var queryH = this.$refs.SingleChannelsztjQuery.$el.clientHeight
                var contentH = docH - queryH - 40
                this.height = contentH - 5
            },
            resize: function () {
                $(window).resize(function () {
                    this.setSize()
                }.bind(this));
            },
        }

    })
</script>


<style scoped>
    html, body, #app {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
        padding: 0;
    }

    header {
        font-size: 14px;
        font-family: 宋体;
        color: #333333;
        border-bottom: 1px solid #b9b9b9;
        height: 100px;
        width: 100%;
    }

        header .el-select .el-input__inner {
            width: 150px;
            height: 32px;
        }

    .el-input__inner {
        height: 32px;
    }

    header .el-button {
        padding: 8px 16px;
    }

    header .el-input__icon {
        line-height: 32px;
    }

    .el-table thead {
        background-color: #F5F5F5;
    }

    tbody .el-table_1_column_3 {
        color: blue;
    }

    .el-dialog {
        height: 600px;
        width: 900px;
        position: relative;
    }

    .el-dialog__header {
        background-color: #2288f1;
        padding: 10px 20px;
    }

    .titlebg {
        background-color: white;
        width: 5px;
        height: 18px;
        position: absolute;
        top: 13px;
        left: 9px;
    }

    .el-dialog__headerbtn .el-dialog__close {
        color: white;
    }

        .el-dialog__headerbtn .el-dialog__close:hover {
            color: white;
            background-color: #6eb1f6;
        }

    .el-dialog__headerbtn {
        top: 13px;
        right: 16px;
    }

    .el-dialog__title {
        color: white;
    }

    #qyjlSelect {
        margin: -10px 0 12px 0px;
    }

        #qyjlSelect .sqqyjltext {
            margin-right: 30px;
            font-size: 16px;
            color: #666666;
            font-family: 'Microsoft YaHei';
        }

        #qyjlSelect .el-button {
            padding: 8px 15px;
        }

        #qyjlSelect .el-input__icon {
            line-height: 34px;
        }

        #qyjlSelect .el-date-editor.el-input, .el-date-editor.el-input__inner {
            width: 200px;
        }

    .el-table--border {
        margin-bottom: 4px;
    }

    .el-pagination {
        float: right;
    }
</style>